resource "helm_release" "cve-operator" {
  depends_on = [var.eks_cluster_name]

  name       = "cve-operator"
  repository = "git+https://github.com/csye7125-su24-team08/helm-cve-operator.git"
  chart      = "helm-cve-operator" # Relative path to the chart directory in the repo
  version    = "0.1.0"             # Specify the version of the Helm chart

  create_namespace = true
  namespace        = "cve-operator"

  values = ["${file("./cve-operator/cve-operator-values.yaml")}"]

  set {
    name  = "imagePullSecrets.dockerConfig"
    value = var.dockerCreds
  }

}
